# BLACK BOX - ALSA Configuration
# Optimized for low-latency USB audio on Jetson Orin Nano

# Default PCM device (USB soundbar for output)
pcm.!default {
    type plug
    slave.pcm "hw:2,0"  # Adjust based on your USB soundbar device
}

# Default control device
ctl.!default {
    type hw
    card 2  # Adjust based on your USB soundbar device
}

# Microphone input device (USB microphone)
pcm.microphone {
    type plug
    slave {
        pcm "hw:1,0"  # Adjust based on your USB microphone device
        rate 16000    # Whisper prefers 16kHz
        channels 1
    }
}

# Optimized playback device (low latency)
pcm.speaker {
    type plug
    slave {
        pcm "hw:2,0"  # USB soundbar
        rate 22050    # Piper TTS output rate
        channels 1
        period_size 256
        buffer_size 1024
    }
}

# DMIX for software mixing (if needed)
pcm.dmixer {
    type dmix
    ipc_key 1024
    slave {
        pcm "hw:2,0"
        rate 22050
        channels 2
        period_time 0
        period_size 256
        buffer_size 1024
    }
}

# Note: Adjust card numbers based on your actual USB audio devices
# Check with: aplay -l (for output devices)
#             arecord -l (for input devices)

